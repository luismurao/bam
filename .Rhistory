A <- sum(m1@sparse_model)
A <- sum(m1@sparse_model)
B <- sum(m2@sparse_model)
A <- sum(m1@sparse_model)
B <- sum(m2@sparse_model)
int_AB <- sum(m3)
jcc <-int_AB/(A+B- int_AB)
jcc
m3
m1@bin_model
m3
which(m3)
m1@bin_model[m1@cellIDs[which(diag(m3))]] <-
A <- sum(m1@sparse_model)
which(diag(m3))
diag(m3)
which(diag(m3)>0)
m1@cellIDs[which(diag(m3)>0)]
mn <- m1@bin_model
mn[m1@cellIDs[which(diag(m3)>0)]] <- 1
plot9mn
plot(mn)
mn <- m1@bin_model * 0
mn[m1@cellIDs[which(diag(m3)>0)]] <- 1
plot(mn)
plot9r1
plot(r3)
r1 <- raster("inst/extdata/conejos/Lepus_othus_cont.tif") > 0.01
r2 <- raster("inst/extdata/conejos/Brachylagus_idahoensis_cont.tif") >0.01
plot(r2)
r3 <- r1+ r3
A1 <- which(r1[]==1)
B1 <- which(r2[]==1)
plot(r2)
plot(r3)
r3 <- r1+ r2
plot(r3)
plot(mn)
class(m1)
c1 <- class(m1)
c2 <- class(m2)
c2
c1 == "bam"
c1 == "setA"
m2
A <- sum(m1)
cl <- c("SetA","raster")
c1 <- class(m1)
c2 <- class(m2)
cl <- c("SetA","raster")
c1 %in% cl
c1
c1 %in% cl
cl <- c("setA","raster")
c1 %in% cl
stop("m1")
jaccard <- function(m1,m2){
c1 <- class(m1)
c2 <- class(m2)
cl <- c("setA","raster")
if(c1 %in% cl){
stop("m1 should be of class raster or setA")
}
if(c2 %in% cl){
stop("m2 should be of class raster or setA")
}
if(c1 == "setA"){
m1 <- m1@sparse_model
}
if(c2 == "setA"){
m2 <- m2@sparse_model
}
if(c1 == "raster"){
m1 <- model2sparse(m1)@sparse_model
}
if(c2 == "raster"){
m2 <- model2sparse(m2)@sparse_model
}
m3 <- m1 * m2
A <- sum(m1)
B <- sum(m2)
int_AB <- sum(m3)
jcc <-int_AB/(A+B- int_AB)
return(jcc)
}
library(bam)
?jaccard
m1_path <- system.file("extdata/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster(m1_path) > 0.01
r2 <- raster(m2_path) >0.01
jcc <- jaccard(r1,r2)
print(jcc)
m1
library(bam)
m1_path <- system.file("extdata/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster(m1_path) > 0.01
r2 <- raster(m2_path) >0.01
jcc <- jaccard(r1,r2)
print(jcc)
rm(list=ls())
library(bam)
m1_path <- system.file("extdata/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster(m1_path) > 0.01
r2 <- raster(m2_path) >0.01
jcc <- jaccard(r1,r2)
print(jcc)
r1 <- raster::raster(m1_path) > 0.01
r2 <- raster::raster(m2_path) >0.01
m1_path
library(bam)
m1_path
library(bam)
package = "bam")
m1_path <- system.file("extdata/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster::raster(m1_path) > 0.01
r2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(r1,r2)
print(jcc)
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster::raster(m1_path) > 0.01
r2 <- raster::raster(m2_path) >0.01
r1
c1 <- class(m1)
c2 <- class(m2)
library(bam)
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster::raster(m1_path) > 0.01
r2 <- raster::raster(m2_path) >0.01
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
c1 <- class(m1)
c2 <- class(m2)
cl <- c("setA","raster")
if(c1 %in% cl){
stop("m1 should be of class raster or setA")
}
if(c2 %in% cl){
stop("m2 should be of class raster or setA")
}
if(c1 == "setA"){
m1 <- m1@sparse_model
}
if(c2 == "setA"){
m2 <- m2@sparse_model
}
if(c1 == "raster"){
m1 <- bam::model2sparse(m1)@sparse_model
}
if(c2 == "raster"){
m2 <- bam::model2sparse(m2)@sparse_model
}
m3 <- m1 * m2
A <- sum(m1)
m1
c1
c1 <- class(m1)
c2 <- class(m2)
cl <- c("setA","RasterLayer")
if(c1 %in% cl){
stop("m1 should be of class raster or setA")
}
if(c2 %in% cl){
stop("m2 should be of class raster or setA")
}
c1 <- class(m1)
c1
c1 %in% cl
c1 %in% cl
c1 %in% cl
c1 <- class(m1)
c2 <- class(m2)
cl <- c("setA","RasterLayer")
if(!c1 %in% cl){
stop("m1 should be of class raster or setA")
}
if(!c2 %in% cl){
stop("m2 should be of class raster or setA")
}
if(c1 == "setA"){
m1 <- m1@sparse_model
}
if(c2 == "setA"){
m2 <- m2@sparse_model
}
if(c1 == "raster"){
m1 <- bam::model2sparse(m1)@sparse_model
}
if(c2 == "raster"){
m2 <- bam::model2sparse(m2)@sparse_model
}
m3 <- m1 * m2
m3
c1 == "setA"
if(c1 == "RasterLayer"){
m1 <- bam::model2sparse(m1)@sparse_model
}
if(c2 == "RasterLayer"){
m2 <- bam::model2sparse(m2)@sparse_model
}
m3 <- m1 * m2
m3
A <- sum(m1)
A
B <- sum(m2)
B
int_AB <- sum(m3)
jcc <-int_AB/(A+B- int_AB)
jcc
library(bam)
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(r1,r2)
print(jcc)
rm(list=ls())
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(r1,r2)
jcc <- bam::jaccard(m1,m2)
print(jcc)
library(bam)
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(r1,r2)
print(jcc)
rm(list=ls())
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(m1,m2)
print(jcc)
print(jcc)
int_AB
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(m1,m2)
print(jcc)
#' @export
#' @examples
#' m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
#'                        package = "bam")
#' m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
#'                        package = "bam")
#' m1 <- raster::raster(m1_path) > 0.01
#' m2 <- raster::raster(m2_path) >0.01
#' jcc <- bam::jaccard(m1,m2)
#' print(jcc)
jaccard <- function(m1,m2){
c1 <- class(m1)
c2 <- class(m2)
cl <- c("setA","RasterLayer")
if(!c1 %in% cl){
stop("m1 should be of class raster or setA")
}
if(!c2 %in% cl){
stop("m2 should be of class raster or setA")
}
if(c1 == "setA"){
m1 <- m1@sparse_model
}
if(c2 == "setA"){
m2 <- m2@sparse_model
}
if(c1 == "RasterLayer"){
m1 <- bam::model2sparse(m1)@sparse_model
}
if(c2 == "RasterLayer"){
m2 <- bam::model2sparse(m2)@sparse_model
}
m3 <- m1 * m2
A <- sum(m1)
B <- sum(m2)
int_AB <- sum(m3)
jcc <-int_AB/(A+B- int_AB)
return(jcc)
}
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(m1,m2)
print(jcc)
t1 <- system.time({
r1 <- raster("inst/extdata/conejos/Lepus_othus_cont.tif") > 0.01
r2 <- raster("inst/extdata/conejos/Brachylagus_idahoensis_cont.tif") >0.01
r3 <- r1+ r2
A1 <- which(r1[]==1)
B1 <- which(r2[]==1)
int_AB1 <- intersect(A1,B1)
b <-length(int_AB1)/(length(A1)+length(B1) - length(int_AB1))
})
t1
t2 <- system.time({
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(m1,m2)
print(jcc)
})
t2 <- system.time({
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(m1,m2)
#print(jcc)
})
t2
t1 <- system.time({
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster::raster(m1_path) > 0.01
r2 <- raster::raster(m2_path) >0.01
r3 <- r1+ r2
A1 <- which(r1[]==1)
B1 <- which(r2[]==1)
int_AB1 <- intersect(A1,B1)
b <-length(int_AB1)/(length(A1)+length(B1) - length(int_AB1))
})
t1
t2 <- system.time({
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(m1,m2)
#print(jcc)
})
t2
t1 <- system.time({
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster::raster(m1_path) > 0.01
r2 <- raster::raster(m2_path) >0.01
r3 <- r1+ r2
A1 <- which(r1[]==1)
B1 <- which(r2[]==1)
int_AB1 <- intersect(A1,B1)
b <-length(int_AB1)/(length(A1)+length(B1) - length(int_AB1))
})
t1
t2 <- system.time({
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(m1,m2)
#print(jcc)
})
t2
t2 <- system.time({
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- raster::raster(m1_path) > 0.01
m2 <- raster::raster(m2_path) >0.01
jcc <- bam::jaccard(m1,m2)
#print(jcc)
})
t2
t1 <- system.time({
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster::raster(m1_path) > 0.01
r2 <- raster::raster(m2_path) >0.01
r3 <- r1+ r2
A1 <- which(r1[]==1)
B1 <- which(r2[]==1)
int_AB1 <- intersect(A1,B1)
b <-length(int_AB1)/(length(A1)+length(B1) - length(int_AB1))
})
t1
m1 <- bam::model2sparse(raster::raster(m1_path) > 0.01)
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- bam::model2sparse(raster::raster(m1_path) > 0.01)
m2 <- bam::model2sparse(raster::raster(m2_path) >0.01)
t2 <- system.time({
jcc <- bam::jaccard(m1,m2)
#print(jcc)
})
t2
t2
t2
m2 <- bam::model2sparse(raster::raster(m2_path) >0.01)
t2 <- system.time({
jcc <- bam::jaccard(m1,m2)
#print(jcc)
})
t2
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster::raster(m1_path) > 0.01
r2 <- raster::raster(m2_path) >0.01
r3 <- r1+ r2
t1 <- system.time({
A1 <- which(r1[]==1)
B1 <- which(r2[]==1)
int_AB1 <- intersect(A1,B1)
b <-length(int_AB1)/(length(A1)+length(B1) - length(int_AB1))
})
t1
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
r1 <- raster::raster(m1_path) > 0.01
r2 <- raster::raster(m2_path) >0.01
r3 <- r1+ r2
t1 <- system.time({
A1 <- which(r1[]==1)
B1 <- which(r2[]==1)
int_AB1 <- intersect(A1,B1)
b <-length(int_AB1)/(length(A1)+length(B1) - length(int_AB1))
})
r3
t1
t2 <- system.time({
jcc <- bam::jaccard(m1,m2)
#print(jcc)
})
t2
jcc=b
t1 <- system.time({
A1 <- which(r1[]==1)
B1 <- which(r2[]==1)
int_AB1 <- intersect(A1,B1)
b <-length(int_AB1)/(length(A1)+length(B1) - length(int_AB1))
})
m1_path <- system.file("extdata/conejos/Lepus_othus_cont.tif",
package = "bam")
m2_path <- system.file("extdata/conejos/Brachylagus_idahoensis_cont.tif",
package = "bam")
m1 <- bam::model2sparse(raster::raster(m1_path) > 0.01)
m2 <- bam::model2sparse(raster::raster(m2_path) >0.01)
t2 <- system.time({
jcc <- bam::jaccard(m1,m2)
#print(jcc)
})
jcc==b
jcc
b
library(bam)
rm(list=ls())
Sys.setenv('_R_CHECK_SYSTEM_CLOCK_' = 0)
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
Sys.getenv("PATH")
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
library(bam)
?jaccard
